<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Extreme Product Filter 4.0</title>
<style>
body {
  font-family:'Poppins',sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:50px;
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4,#a18cd1,#fbc2eb);
  background-size:400% 400%;
  animation:gradientBG 15s ease infinite;
  overflow-x:hidden;
  color:#fff;
}
@keyframes gradientBG{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}

h1 {margin-bottom:30px; text-shadow:0 0 15px rgba(0,0,0,0.5);}

.buttons {display:flex; gap:15px; margin-bottom:20px; flex-wrap:wrap;}
button {
  position:relative;
  padding:10px 20px;
  font-size:16px;
  border:none;
  border-radius:10px;
  cursor:pointer;
  background: rgba(255,255,255,0.2);
  color:#fff;
  overflow:hidden;
  transition:0.3s ease, transform 0.2s ease;
}
button.active {background:#00ff6a; color:#000;}
button:hover {background: rgba(255,255,255,0.5); transform:scale(1.05);}
button::after {
  content:'';
  position:absolute;
  width:100%; height:100%;
  top:0; left:0;
  background:rgba(255,255,255,0.3);
  border-radius:10px;
  transform:scale(0);
  transition:transform 0.3s ease;
}
button:active::after {transform:scale(1); transition:0s;}
.count-badge {position:absolute; top:-8px; right:-8px; background:#ff4c4c; color:#fff; border-radius:50%; padding:2px 6px; font-size:12px;}

#searchBox {
  padding:10px 15px; font-size:16px;
  border-radius:10px; border:2px solid rgba(255,255,255,0.3);
  outline:none; margin-bottom:20px; width:250px;
}
#searchBox:focus {border-color:#00ff6a;}

.product-list {display:flex; flex-wrap:wrap; gap:15px; justify-content:center; max-width:700px;}
.product {
  background: rgba(255,255,255,0.2); padding:15px 20px;
  border-radius:12px; min-width:120px;
  text-align:center; transition:all 0.4s ease, transform 0.3s ease;
  opacity:1; cursor:pointer; box-shadow:0 0 0 rgba(0,0,0,0);
  position:relative;
}
.product.hide {opacity:0; transform:scale(0.8); pointer-events:none;}
.product:hover {background: rgba(255,255,255,0.5); transform:scale(1.1); box-shadow:0 0 25px #fff;}
.product::after {
  content:'âœ¨';
  position:absolute; top:-10px; left:50%;
  transform:translateX(-50%) scale(0);
  font-size:20px; opacity:0;
  transition:all 0.3s ease;
}
.product:hover::after {transform:translateX(-50%) scale(1); opacity:1;}

canvas {position:fixed; top:0; left:0; pointer-events:none; z-index:0;}
</style>
</head>
<body>

<h1>Extreme Product Filter 4.0</h1>
<div class="buttons">
  <button class="filter-btn active" data-category="all">All <span class="count-badge"></span></button>
  <button class="filter-btn" data-category="electronics">Electronics <span class="count-badge"></span></button>
  <button class="filter-btn" data-category="clothing">Clothing <span class="count-badge"></span></button>
  <button class="filter-btn" data-category="books">Books <span class="count-badge"></span></button>
</div>
<input type="text" id="searchBox" placeholder="Search products...">
<div class="product-list" id="productList"></div>

<canvas id="particleCanvas"></canvas>

<script>
const products = [
  {name:'Laptop', category:'electronics'},
  {name:'Smartphone', category:'electronics'},
  {name:'Headphones', category:'electronics'},
  {name:'Jeans', category:'clothing'},
  {name:'T-Shirt', category:'clothing'},
  {name:'Jacket', category:'clothing'},
  {name:'Book: JS Basics', category:'books'},
  {name:'Book: CSS Tricks', category:'books'},
  {name:'Sneakers', category:'clothing'},
  {name:'Camera', category:'electronics'}
];

const productList = document.getElementById('productList');
const buttons = document.querySelectorAll('.filter-btn');
const searchBox = document.getElementById('searchBox');

function speak(text){
  const utter = new SpeechSynthesisUtterance(text);
  utter.rate = 1.8;
  speechSynthesis.speak(utter);
}

function confetti(){
  for(let i=0;i<50;i++){
    const particle = document.createElement('div');
    particle.style.position='fixed';
    particle.style.width='6px';
    particle.style.height='6px';
    particle.style.background=`hsl(${Math.random()*360},100%,50%)`;
    particle.style.top='0px';
    particle.style.left=Math.random()*window.innerWidth+'px';
    particle.style.opacity=1;
    particle.style.borderRadius='50%';
    document.body.appendChild(particle);
    const fall = setInterval(()=>{
      const top = parseFloat(particle.style.top);
      if(top>window.innerHeight){particle.remove(); clearInterval(fall);}
      else particle.style.top = top+Math.random()*10+'px';
      particle.style.left = parseFloat(particle.style.left) + Math.random()*4 -2 +'px';
    },20);
  }
}

function displayProducts(list){
  productList.innerHTML='';
  if(list.length===0){productList.innerHTML='<p>No products found</p>'; return;}
  list.forEach(product=>{
    const div=document.createElement('div');
    div.classList.add('product');
    div.textContent=product.name;
    div.addEventListener('mouseenter', ()=>speak(product.name));
    productList.appendChild(div);
    setTimeout(()=>div.classList.remove('hide'),10);
  });
}

function updateCounts(){
  buttons.forEach(btn=>{
    const category=btn.dataset.category;
    const count=category==='all'?products.length:products.filter(p=>p.category===category).length;
    btn.querySelector('.count-badge').textContent=count;
  });
}

function filterProducts(category){
  const searchText=searchBox.value.toLowerCase();
  let filtered=category==='all'?products:products.filter(p=>p.category===category);
  if(searchText) filtered=filtered.filter(p=>p.name.toLowerCase().includes(searchText));
  displayProducts(filtered);
}

buttons.forEach(btn=>{
  btn.addEventListener('click', ()=>{
    buttons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    const category=btn.dataset.category;
    filterProducts(category);
    confetti();
    speak('Showing ' + (category==='all'?'all products':category));
  });
});

searchBox.addEventListener('input', ()=>{
  const activeBtn=document.querySelector('.filter-btn.active');
  filterProducts(activeBtn.dataset.category);
});

updateCounts();
displayProducts(products);

const canvas=document.getElementById('particleCanvas');
const ctx=canvas.getContext('2d');
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;
const particles=[];
for(let i=0;i<120;i++){
  particles.push({x:Math.random()*canvas.width, y:Math.random()*canvas.height, r:Math.random()*2+1, dx:(Math.random()-0.5)*0.5, dy:(Math.random()-0.5)*0.5});
}
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    p.x+=p.dx; p.y+=p.dy;
    if(p.x<0)p.x=canvas.width;if(p.x>canvas.width)p.x=0;
    if(p.y<0)p.y=canvas.height;if(p.y>canvas.height)p.y=0;
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle='rgba(255,255,255,0.5)';
    ctx.fill();
  });
  requestAnimationFrame(animate);
}
animate();
window.addEventListener('resize', ()=>{
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
});
</script>

</body>
</html>
